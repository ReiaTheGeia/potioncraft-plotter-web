"use strict";(self.webpackChunkpotioncraft_plotter=self.webpackChunkpotioncraft_plotter||[]).push([[47],{5426:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(7537),i=r.n(n),o=r(3645),u=r.n(o)()(i());u.push([e.id,"/*\r\nThis should be kept minimal and only provide globals\r\nor non-react component styles.\r\n*/\r\n\r\nhtml, body, #root {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n}","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;;;CAGC;;AAED;EACE,WAAW;EACX,YAAY;EACZ,SAAS;AACX",sourcesContent:["/*\r\nThis should be kept minimal and only provide globals\r\nor non-react component styles.\r\n*/\r\n\r\nhtml, body, #root {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n}"],sourceRoot:""}]);const l=u},7654:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(3379),i=r.n(n),o=r(7795),u=r.n(o),l=r(569),a=r.n(l),c=r(3565),d=r.n(c),s=r(9216),f=r.n(s),p=r(4589),v=r.n(p),h=r(5426),y={};y.styleTagTransform=v(),y.setAttributes=d(),y.insert=a().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=f(),i()(h.Z,y);const m=h.Z&&h.Z.locals?h.Z.locals:void 0},78:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(r(7294)),a=u(r(5799));t.default=function(){return l.createElement(a.default,null)}},2529:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(r(7294)),l=r(2087),a=r(5145),c=r(1012),d=r(3728),s=(0,l.styled)(l.Tooltip)({tooltipPlacementLeft:{margin:"10px 0"}});t.default=function(e){var t=e.value,r=e.onChange,o=e.allowEmpty,f=void 0!==o&&o,p=e.onMouseOverItem,v=e.onMouseOutItem,h=i(e,["value","onChange","allowEmpty","onMouseOverItem","onMouseOutItem"]),y=(0,a.useDIDependency)(c.IngredientRegistry),m=u.default.useCallback((function(e){var t=e.target.value;r(""===t?null:t)}),[r]);return u.default.createElement(l.Select,n({},h,{value:null!=t?t:"",onChange:m}),f&&u.default.createElement(l.MenuItem,{value:""}),y.getIngredients().map((function(e){return u.default.createElement(l.MenuItem,{key:e.id,value:e.id,onMouseOver:p?function(){return p(e.id)}:void 0,onMouseOut:v},u.default.createElement(s,{placement:"left",title:u.default.createElement("svg",{width:"100px",height:"100px",viewBox:"-".concat(d.MAX_INGREDIENT_EXTENT," -").concat(d.MAX_INGREDIENT_EXTENT," ").concat(2*d.MAX_INGREDIENT_EXTENT," ").concat(2*d.MAX_INGREDIENT_EXTENT),transform:"scale(1, -1)"},u.default.createElement("circle",{cx:0,cy:0,r:d.POTION_RADIUS,fill:"blue"}),u.default.createElement("path",{d:e.path.reduce((function(e,t){return e+"M ".concat(t.start.x," ").concat(t.start.y," C ").concat(t.p1.x,",").concat(t.p1.y," ").concat(t.p2.x,",").concat(t.p2.y," ").concat(t.end.x,",").concat(t.end.y)}),"M 0 0 "),stroke:"black",strokeWidth:.2,fill:"none"}))},u.default.createElement(l.ListItemText,null,e.name)))})))}},7214:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(7294)),u=r(2087),l=r(8142),a=r(5874),c=r(5009),d=i(r(2529)),s=(0,u.styled)("div")((function(e){var t=e.theme;return{overflow:"auto",boxSixing:"border-box",display:"flex",flexDirection:"column","& .list":{listStyle:"none",paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},"& .list-item":{position:"relative",marginBottom:t.spacing(1)},"& .list-item .delete-button":{position:"absolute",top:"5px",right:"15px"},"& .buttons":{alignSelf:"center",display:"flex",flexDirection:"column",alignItems:"center"}}})),f=function(e){var t=e.item,r=e.highlight,n=void 0!==r&&r,i=e.onMouseOver,u=e.onMouseOut;return t instanceof c.AddIngredientPlotBuilderItem?o.default.createElement(v,{item:t,highlight:n,onMouseOver:i,onMouseOut:u}):t instanceof c.StirCauldronPlotBuilderItem?o.default.createElement(h,{item:t,highlight:n,onMouseOver:i,onMouseOut:u}):t instanceof c.PourSolventPlotBuilderItem?o.default.createElement(y,{item:t,highlight:n,onMouseOver:i,onMouseOut:u}):o.default.createElement("div",null,"Unknown PlotItem ",t.constructor.name)},p=function(e){var t,r=e.item,n=e.highlight,i=e.children,c=e.onMouseOver,d=e.onMouseOut,s=null!==(t=(0,a.useObservation)(r.isValid$))&&void 0!==t&&t;return o.default.createElement(u.Card,{className:"list-item",style:{backgroundColor:(s?n&&"lightblue":"salmon")||void 0},onMouseOver:function(){return c(r)},onMouseOut:d},o.default.createElement(u.IconButton,{size:"small",className:"delete-button",onClick:function(){return r.delete()}},o.default.createElement(l.Delete,null)),o.default.createElement(u.CardContent,null,i))},v=function(e){var t,r,i=e.item,l=e.highlight,c=e.onMouseOver,s=e.onMouseOut,f=o.default.useRef(null),v=n(o.default.useState(!1),2),h=v[0],y=v[1],m=o.default.useRef(!1),b=n(o.default.useState(!1),2),g=b[0],_=b[1],P=null!==(t=(0,a.useObservation)(i.ingredientId$))&&void 0!==t?t:null,O=null!==(r=(0,a.useObservation)(i.grindPercent$))&&void 0!==r?r:0,C=h?f.current:P;return o.default.createElement(p,{item:i,highlight:l,onMouseOver:g?function(){}:c,onMouseOut:g?function(){}:s},o.default.createElement("div",null,o.default.createElement(u.Typography,{variant:"overline"},"Ingredient")),o.default.createElement(d.default,{fullWidth:!0,value:C,allowEmpty:null==C,onOpen:function(){f.current=i.ingredientId,y(!0),m.current=!0},onMouseOverItem:function(e){h&&i.setIngredient(e)},onChange:function(e){y(!1),m.current=!1,i.setIngredient(e)},onClose:function(){m.current&&(i.setIngredient(f.current),y(!1),m.current=!1),f.current=null}}),o.default.createElement(u.Grid,{paddingTop:1},o.default.createElement(u.Typography,{id:"grind-label"},"Grind Percent"),o.default.createElement(u.Slider,{value:O,onChange:function(e,t){o.default.startTransition((function(){i.setGrindPercent(t)})),_(!0)},onChangeCommitted:function(e,t){i.setGrindPercent(t),_(!1)},"aria-labelledby":"grind-label",min:0,max:1,step:.001})))},h=function(e){var t,r,i=e.item,l=e.highlight,c=e.onMouseOver,d=e.onMouseOut,s=null!==(t=(0,a.useObservation)(i.distance$))&&void 0!==t?t:0,f=n(o.default.useState(null),2),v=f[0],h=f[1];return o.default.createElement(p,{item:i,highlight:l,onMouseOver:c,onMouseOut:d},o.default.createElement("div",null,o.default.createElement(u.Typography,{variant:"overline"},"Stir Cauldron")),o.default.createElement(u.TextField,{label:"Distance",value:null!==(r=null!=v?v:s)&&void 0!==r?r:"",onChange:function(e){var t=Number(e.target.value);isNaN(t)&&(t=null),h(e.target.value),i.setDistance(t)},onBlur:function(){return h(null)}}))},y=function(e){var t,r=e.item,i=e.highlight,l=e.onMouseOver,c=e.onMouseOut,d=(0,a.useObservation)(r.distance$),s=n(o.default.useState(null),2),f=s[0],v=s[1];return o.default.createElement(p,{item:r,highlight:i,onMouseOver:l,onMouseOut:c},o.default.createElement("div",null,o.default.createElement(u.Typography,{variant:"overline"},"Pour Solvent")),o.default.createElement(u.TextField,{label:"Distance",value:null!==(t=null!=f?f:d)&&void 0!==t?t:"",onChange:function(e){var t=Number(e.target.value);isNaN(t)&&(t=null),v(e.target.value),r.setDistance(t)},onBlur:function(){return v(null)}}))};t.default=function(e){var t,r=e.className,n=e.builder,i=e.highlightItem,c=e.onMouseOver,d=e.onMouseOut,p=null!==(t=(0,a.useObservation)(n.items$))&&void 0!==t?t:[];return o.default.createElement(s,{className:r},o.default.createElement("ul",{className:"list"},p.map((function(e,t){return o.default.createElement(f,{key:t,item:e,highlight:e===i,onMouseOver:c,onMouseOut:d})}))),o.default.createElement("div",{className:"buttons"},o.default.createElement(u.Button,{color:"primary",onClick:function(){return n.addIngredient()}},o.default.createElement(l.Add,null)," Ingredient"),o.default.createElement(u.Button,{color:"primary",onClick:function(){return n.addStirCauldron()}},o.default.createElement(l.Add,null)," Stir Cauldron"),o.default.createElement(u.Button,{color:"primary",onClick:function(){return n.addPourSolvent()}},o.default.createElement(l.Add,null)," Pour Solvent")))}},1284:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(7294)),o=r(2087),u=r(5145),l=r(5874),a=n(r(4470)),c=n(r(7214)),d=r(5879),s=r(7518),f=(0,o.styled)("div")({width:"100%",height:"100%",display:"flex",flexDirection:"row","& .plot":{width:"100%",height:"100%"},"& .divider":{width:"2px",height:"100%",background:"grey"},"& .plot-items":{width:"400px",height:"100%"}});t.default=function(){var e,t,r,n=(0,u.useDICreate)(d.PlotEditorViewModel),o=n.builder,p=null!==(e=(0,l.useObservation)(o.plot$))&&void 0!==e?e:null,v=i.default.useDeferredValue(p),h=null!==(t=(0,l.useObservation)(n.mouseOverBuilderItem$))&&void 0!==t?t:null,y=null!==(r=(0,l.useObservation)(n.shareString$))&&void 0!==r?r:null;return i.default.useEffect((function(){var e=new URLSearchParams(window.location.search);if(e.has("data")){var t=e.get("data");o.loadFromShareString(t)}}),[]),i.default.useEffect((function(){if(y){var e=new URLSearchParams(window.location.search);e.set("data",y),window.history.replaceState({},"","?".concat(e.toString()))}}),[y]),i.default.createElement(f,null,i.default.createElement(a.default,{className:"plot",plot:null!=v?v:s.EmptyPlotResult,viewModel:n}),i.default.createElement("div",{className:"divider"}),i.default.createElement(c.default,{className:"plot-items",builder:o,highlightItem:h,onMouseOver:function(e){return n.onMouseOverBuilderItem(e)},onMouseOut:function(){return n.onMouseOverBuilderItem(null)}}))}},5879:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,u=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(u=(o<3?i(u):o>3?i(t,r,u):i(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u},i=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotEditorViewModel=void 0;var o=r(2872),u=r(815),l=r(5009),a=r(3106),c=function(){function e(e){this._builder=e,this._plotViewModel=new a.PlotViewModel,this._mouseOverBuilderItem$=new o.BehaviorSubject(null),this._shareString$=this._builder.plot$.pipe((0,o.map)((function(t){return e.getShareString()})))}return Object.defineProperty(e.prototype,"builder",{get:function(){return this._builder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareString$",{get:function(){return this._shareString$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewOffset$",{get:function(){return this._plotViewModel.viewOffset$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewScale$",{get:function(){return this._plotViewModel.viewScale$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseOverItem$",{get:function(){return this._plotViewModel.mouseOverItem$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseOverBuilderItem$",{get:function(){return this._mouseOverBuilderItem$},enumerable:!1,configurable:!0}),e.prototype.viewportResize=function(e,t){this._plotViewModel.viewportResize(e,t)},e.prototype.zoom=function(e,t){this._plotViewModel.zoom(e,t)},e.prototype.pan=function(e,t){this._plotViewModel.pan(e,t)},e.prototype.onMouseOverPlotItem=function(e){this._plotViewModel.onMouseOverPlotItem(e),this._mouseOverBuilderItem$.next(e?this._builder.builderItemFor(e):null)},e.prototype.onMouseOverBuilderItem=function(e){this._mouseOverBuilderItem$.next(e),this._plotViewModel.onMouseOverPlotItem(e?e.plotItem:null)},n([i(0,(0,u.inject)(l.PlotBuilder))],e)}();t.PlotEditorViewModel=c},5799:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1284));t.default=i.default},8164:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(r(7294)),l=o(r(6767)),a=r(2087),c=r(5145),d=r(5874),s=r(8254),f=r(3728),p=r(8593),v=r(3106),h=o(r(8614)),y=o(r(5018)),m=o(r(5839)),b=(0,a.styled)("div")((function(e){var t=e.theme;return{backgroundColor:"#DABE99",overflow:"auto",position:"relative","& .plot-details":{position:"absolute",top:t.spacing(2),right:t.spacing(2)},"& .inspect-source":{position:"absolute",top:t.spacing(2),left:t.spacing(2)},"& .plot-svg":{display:"block"}}})),g=function(e){var t,r=e.line,n=e.pending,i=e.highlight,o=e.onMouseOver,a=e.onMouseOut,c=(0,v.usePlotViewModel)(),s=null!==(t=(0,d.useObservation)(c.viewScale$))&&void 0!==t?t:1,f=r.points,p=r.source,h=r.evenOdd,y=u.default.useCallback((function(){o(r)}),[r,o]);if(0===f.length)return null;var m="black";switch(p.type){case"add-ingredient":m=h?"red":"green";break;case"pour-solvent":m="blue"}n&&(m=(0,l.default)(m).lighten(.4).hex());var b=r.points.reduce((function(e,t){return"".concat(e," L").concat(t.x,",").concat(t.y)}),"M ".concat(f[0].x," ").concat(f[0].y," "));return u.default.createElement("path",{d:b,stroke:m,strokeWidth:(i?.8:.4)/s,fill:"none",onMouseOver:y,onMouseOut:a})};t.default=function(e){var t,r,o,l=e.className,a=e.plot,_=e.viewModel,P=(0,c.useDICreate)(v.PlotViewModel),O=null!=_?_:P,C=null!==(t=(0,d.useObservation)(O.viewOffset$))&&void 0!==t?t:s.PointZero,I=null!==(r=(0,d.useObservation)(O.viewScale$))&&void 0!==r?r:1,E=null!==(o=(0,d.useObservation)(O.mouseOverItem$))&&void 0!==o?o:null,M=u.default.useCallback((function(e){O.onMouseOverPlotItem(e.source)}),[O]),w=n(function(e,t,r){var n,o,u,l,a,c,d,s;void 0===r&&(r=4);var f=null,v=0,h=[],y=[],m=null;try{for(var b=i(e),g=b.next();!g.done;g=b.next()){var _=g.value;null!=f&&f.source==_.source||(null!=m&&m===_.source||(v++,m=_.source),f={points:[],source:_.source,evenOdd:v%2==1},h.push(f)),f.points.push(_)}}catch(e){n={error:e}}finally{try{g&&!g.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}f=null;try{for(var P=i(t),O=P.next();!O.done;O=P.next())_=O.value,null!=f&&f.source==_.source||(null!=m&&m===_.source||(v++,m=_.source),f={points:[],source:_.source,evenOdd:v%2==1},y.push(f)),f.points.push(_)}catch(e){u={error:e}}finally{try{O&&!O.done&&(l=P.return)&&l.call(P)}finally{if(u)throw u.error}}if(r>1){try{for(var C=i(h),I=C.next();!I.done;I=C.next())(w=I.value).points=(0,p.keepEveryK)(w.points,r,!0)}catch(e){a={error:e}}finally{try{I&&!I.done&&(c=C.return)&&c.call(C)}finally{if(a)throw a.error}}try{for(var E=i(y),M=E.next();!M.done;M=E.next()){var w;(w=M.value).points=(0,p.keepEveryK)(w.points,r,!0)}}catch(e){d={error:e}}finally{try{M&&!M.done&&(s=E.return)&&s.call(E)}finally{if(d)throw d.error}}}return[h,y]}(a.committedPoints,a.pendingPoints),2),B=w[0],S=w[1],x=-f.MAP_EXTENT_RADIUS+C.x,j=-f.MAP_EXTENT_RADIUS+C.y,z=2*f.MAP_EXTENT_RADIUS*(1/I),A=2*f.MAP_EXTENT_RADIUS*(1/I);return u.default.createElement(b,{className:l},u.default.createElement(v.PlotViewModelContext.Provider,{value:O},u.default.createElement(h.default,null,u.default.createElement("svg",{className:"plot-svg",width:"100%",height:"100%",viewBox:"".concat(x," ").concat(j," ").concat(z," ").concat(A),transform:"scale(1, -1)"},u.default.createElement("rect",{x:-60,y:-60,width:120,height:120,stroke:"red",fill:"none",strokeWidth:.2/I}),u.default.createElement("circle",{cx:0,cy:0,r:f.POTION_RADIUS,fill:"blue"}),B.map((function(e,t){return u.default.createElement(g,{key:t,line:e,pending:!1,highlight:e.source===E,onMouseOver:M,onMouseOut:function(){return O.onMouseOverPlotItem(null)}})})),S.map((function(e,t){return u.default.createElement(g,{key:t,line:e,pending:!0,highlight:e.source===E,onMouseOver:M,onMouseOut:function(){return O.onMouseOverPlotItem(null)}})}))),E&&u.default.createElement(m.default,{className:"inspect-source",step:E}),u.default.createElement(y.default,{className:"plot-details",plot:a}))))}},3106:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewModel=t.usePlotViewModel=t.PlotViewModelContext=void 0;var i=n(r(7294)),o=r(2872),u=r(8254),l=r(3728);t.PlotViewModelContext=i.default.createContext(null),t.usePlotViewModel=function(){var e=i.default.useContext(t.PlotViewModelContext);if(!e)throw new Error("PlotViewModelContext not found");return e};var a=function(){function e(){this._viewOffset$=new o.BehaviorSubject(u.PointZero),this._viewScale$=new o.BehaviorSubject(1),this._inspectSource=new o.BehaviorSubject(null),this._viewportWidth=0,this._viewportHeight=0}return Object.defineProperty(e.prototype,"viewOffset$",{get:function(){return this._viewOffset$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewScale$",{get:function(){return this._viewScale$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseOverItem$",{get:function(){return this._inspectSource},enumerable:!1,configurable:!0}),e.prototype.viewportResize=function(e,t){this._viewportWidth=e,this._viewportHeight=t},e.prototype.zoom=function(e,t){void 0===t&&(t=null);var r=t?this._clientToWorld(t):u.PointZero,n=this._viewScale$.value*e;if(this._viewScale$.next(n),t){var i=this._clientToWorld(t),o=(0,u.pointSubtract)(r,i);this._viewOffset$.next((0,u.pointAdd)(this._viewOffset$.value,o))}},e.prototype.pan=function(e,t,r){void 0===r&&(r=!1);var n=r?1/this._viewScale$.value:1;this._viewOffset$.next((0,u.pointAdd)(this._viewOffset$.value,{x:e*n,y:t*n}))},e.prototype.onMouseOverPlotItem=function(e){this._inspectSource.next(e)},e.prototype._clientToWorld=function(e){var t=this._viewOffset$.value,r=this._viewScale$.value;return e=(0,u.pointScale)(e,1/r),e=(0,u.pointScale)(e,2*l.MAP_EXTENT_RADIUS/this._viewportWidth),{x:(e=(0,u.pointAdd)(e,t)).x-l.MAP_EXTENT_RADIUS,y:e.y-l.MAP_EXTENT_RADIUS}},e}();t.PlotViewModel=a},8614:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PAN_FACTOR=t.ZOOM_FACTOR=void 0;var u=o(r(7294)),l=r(2087),a=r(2038),c=r(4405),d=r(3097),s=r(3106);t.ZOOM_FACTOR=1.05,t.PAN_FACTOR=.05;var f=(0,l.styled)("div")({width:"100%",height:"100%"});t.default=function(e){var r=e.className,n=e.children,i=(0,s.usePlotViewModel)(),o=u.useRef(null),l=(0,c.useComponentBounds)(o);u.useLayoutEffect((function(){i.viewportResize(l.width,l.height)}),[l.width,l.height]);var p=u.useCallback((function(e){if(o.current&&!e.defaultPrevented){var r=(0,a.getModifiers)(e);r.ctrlMetaKey?(i.zoom(e.deltaY<0?t.ZOOM_FACTOR:1/t.ZOOM_FACTOR,{x:e.clientX,y:e.clientY}),e.preventDefault(),e.stopPropagation()):r.shiftKey?(i.pan(e.deltaY*t.PAN_FACTOR,0,!0),e.preventDefault(),e.stopPropagation()):(i.pan(0,-e.deltaY*t.PAN_FACTOR,!0),e.preventDefault(),e.stopPropagation())}}),[]);return(0,d.useNativeEvent)(o,"wheel",p,{passive:!1}),u.createElement(f,{className:r,ref:o},n)}},5018:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isIngredientPoint=void 0;var u=o(r(7294)),l=r(6486),a=r(2087),c=r(5145),d=r(4056),s=r(1012);function f(e){return"add-ingredient"===e.type}t.default=function(e){var t=e.className,r=e.plot,o=(0,c.useDIDependency)(s.IngredientRegistry),p=i(u.default.useMemo((function(){var e,t,i,u=r.committedPoints.concat(r.pendingPoints),a=(0,l.uniq)(u.map((function(e){return e.source}))).filter(f),c=0,s={};try{for(var p=n(a),v=p.next();!v.done;v=p.next()){var h=v.value.ingredientId,y=o.getIngredient(h);y&&(c+=y.price,s[y.id]=(null!==(i=s[y.id])&&void 0!==i?i:0)+1)}}catch(t){e={error:t}}finally{try{v&&!v.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}return[c,(0,d.pointArrayLength)(r.committedPoints),a.length,(0,l.uniq)(a.map((function(e){return e.ingredientId}))).length,Math.sqrt((0,l.sum)(Object.keys(s).map((function(e){return Math.pow(s[e],2)}))))]}),[r,s.IngredientRegistry]),5),v=p[0],h=p[1],y=p[2],m=p[3],b=p[4];return u.default.createElement(a.Card,{className:t,variant:"outlined"},u.default.createElement(a.CardContent,null,u.default.createElement(a.Typography,{variant:"h6"},"Details"),u.default.createElement("div",null,u.default.createElement(a.Typography,null,"Ingredient count: "),u.default.createElement(a.Typography,{variant:"overline"},y," (",m," unique)")),u.default.createElement("div",null,u.default.createElement(a.Typography,null,"Ingredient stress: "),u.default.createElement(a.Typography,{variant:"overline"},b.toFixed(2))),u.default.createElement("div",null,u.default.createElement(a.Typography,null,"Base Cost: "),u.default.createElement(a.Typography,{variant:"overline"},v)),u.default.createElement("div",null,u.default.createElement(a.Typography,null,"Committed length: "),u.default.createElement(a.Typography,{variant:"overline"},h.toFixed(2)))))},t.isIngredientPoint=f},5839:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(7294)),o=r(2087),u=r(5145),l=r(3728),a=r(1012),c=(0,o.styled)("div")({"& .svg-container":{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}),d=function(e){var t,r=e.step,n=null!==(t=(0,u.useDIDependency)(a.IngredientRegistry).getIngredient(r.ingredientId))&&void 0!==t?t:{name:"Unknown",path:[]},d=n.path.reduce((function(e,t){return e+"M ".concat(t.start.x," ").concat(t.start.y," C ").concat(t.p1.x,",").concat(t.p1.y," ").concat(t.p2.x,",").concat(t.p2.y," ").concat(t.end.x,",").concat(t.end.y)}),"M 0 0 ");return i.default.createElement(c,null,i.default.createElement(o.Typography,{variant:"h6"},"Ingredient"),i.default.createElement(o.Typography,{variant:"overline"},n.name),i.default.createElement("div",null,i.default.createElement(o.Typography,null,"Grind Percentage"),i.default.createElement(o.Typography,{variant:"overline"},r.grindPercent)),i.default.createElement("div",{className:"svg-container"},i.default.createElement("svg",{width:"100px",height:"100px",viewBox:"-".concat(l.MAX_INGREDIENT_EXTENT," -").concat(l.MAX_INGREDIENT_EXTENT," ").concat(2*l.MAX_INGREDIENT_EXTENT," ").concat(2*l.MAX_INGREDIENT_EXTENT),transform:"scale(1, -1)"},i.default.createElement("circle",{cx:0,cy:0,r:l.POTION_RADIUS,fill:"blue"}),i.default.createElement("path",{d,stroke:"black",strokeWidth:.2,fill:"none"}))))};t.default=function(e){var t,r=e.step,n=e.className;return"add-ingredient"!==r.type?null:(t=i.default.createElement(d,{step:r}),i.default.createElement(o.Card,{className:n,variant:"outlined"},i.default.createElement(o.CardContent,null,t)))}},4470:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(8164));t.default=i.default},5145:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useDICreate=t.useDIDependency=t.useDIContainer=t.ContainerProvider=void 0;var i=n(r(7294)),o=r(815),u=n(r(2204)),l=(0,o.composeModules)(u.default),a=i.default.createContext(new o.Container),c=new o.Container;function d(){return i.default.useContext(a)}c.bind(o.Container).toConstantValue(c),c.load(l),t.default=c,t.ContainerProvider=function(e){var t=e.children;return i.default.createElement(a.Provider,{value:c},t)},t.useDIContainer=d,t.useDIDependency=function(e){return d().get(e)},t.useDICreate=function(e,t){var r=d(),n=i.default.useRef();return null==n.current&&(n.current=r.create(e,t)),n.current}},1848:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.curveToPoints=t.getCurveLength=t.getCurvePoint=t.cubicBezierCurve=void 0;var i=r(3728),o=r(8254);function u(e,t){if(t<0||t>1)throw new Error("getPoint: t must be between 0 and 1");var r=(1-t)*(1-t)*(1-t),n=3*t*(1-t)*(1-t),i=3*t*t*(1-t),o=t*t*t;return{x:r*e.start.x+n*e.p1.x+i*e.p2.x+o*e.end.x,y:r*e.start.y+n*e.p1.y+i*e.p2.y+o*e.end.y}}t.cubicBezierCurve=function(e,t,r,n,i,o,u,l){return{start:{x:e,y:t},p1:{x:r,y:n},p2:{x:i,y:o},end:{x:u,y:l}}},t.getCurvePoint=u;var l=new Map;function a(e){var t=i.BEZIER_CURVE_LENGTH_RESOLUTION,r=l.get(e);if(void 0!==r)return r;for(var n=0,a=u(e,0),c=1;c<=t;c++){var d=u(e,c/t),s=(0,o.pointSubtract)(d,a);n+=(0,o.pointMagnitude)(s),a=d}return l.set(e,n),n}t.getCurveLength=a;var c=new Map;t.curveToPoints=function(e){var t,r,l=i.PATH_SPACING_PHYSICS,d=c.get(e);if(void 0!==d)return d;var s=[],f=0,p=e.start;s.push(p);for(var v=Math.ceil(1*a(e)*10),h=0;h<=v;h++){var y=u(e,h/v);for(f+=(0,o.pointDistance)(p,y);f>=l;){f-=l;var m=(0,o.pointAdd)(y,(0,o.pointScale)((0,o.pointNormalize)((0,o.pointSubtract)(p,y)),f));s.push(m),p=m}p=y}f>0&&s.push(u(e,1)),Object.freeze(s);try{for(var b=n(s),g=b.next();!g.done;g=b.next()){var _=g.value;Object.freeze(_)}}catch(e){t={error:e}}finally{try{g&&!g.done&&(r=b.return)&&r.call(b)}finally{if(t)throw t.error}}return c.set(e,s),s}},3728:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_INGREDIENT_EXTENT=t.POTION_RADIUS=t.MAP_EXTENT_RADIUS=t.BEZIER_CURVE_LENGTH_RESOLUTION=t.PATH_SPACING_PHYSICS=void 0,t.PATH_SPACING_PHYSICS=.05,t.BEZIER_CURVE_LENGTH_RESOLUTION=200,t.MAP_EXTENT_RADIUS=60,t.POTION_RADIUS=.79,t.MAX_INGREDIENT_EXTENT=10},4405:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.useComponentBounds=void 0;var l=o(r(7294));t.useComponentBounds=function(e){var t=u(l.useState({left:0,top:0,right:0,bottom:0,width:0,height:0}),2),r=t[0],n=t[1];return l.useLayoutEffect((function(){if(e.current){var t=new ResizeObserver((function(){var t=e.current;if(t){var r=t.getBoundingClientRect();n({top:r.top,left:r.left,right:r.right,bottom:r.bottom,width:r.width,height:r.height})}}));return t.observe(e.current),function(){t.disconnect()}}}),[e]),r}},3097:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useNativeEvent=void 0;var u=o(r(7294));t.useNativeEvent=function(e,t,r,n){u.useEffect((function(){if(e.current){var i=e.current;return i.addEventListener(t,r,n),function(){i.removeEventListener(t,r,n)}}}),[t,r,e,n])}},5874:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useObservation=void 0;var o=i(r(7294)),u=r(2872);t.useObservation=function(e,t){var r=void 0===t?{}:t,i=r.useTransition,l=r.onError,a=n(o.default.useState(void 0),2),c=a[0],d=a[1];return o.default.useEffect((function(){if(e){if(e instanceof u.Observable){var t=e.subscribe({next:function(e){i?o.default.startTransition((function(){return d(e)})):d(e)},error:l});return function(){return t.unsubscribe()}}d(e)}}),[e,l,i]),c}},2629:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(7654);var l=o(r(7294)),a=o(r(745)),c=r(5145),d=u(r(422)),s=u(r(78)),f=document.getElementById("root");a.createRoot(f).render(l.createElement(l.StrictMode,null,l.createElement(c.ContainerProvider,null,l.createElement(d.default,null,l.createElement(s.default,null)))))},2038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isModifierPressed=t.getModifiers=t.MODIFIER_KEYS_NONE=void 0;var n=r(5596);t.MODIFIER_KEYS_NONE=Object.freeze({}),t.getModifiers=function(e){var t=e.ctrlKey,r=e.altKey,i=e.shiftKey,o=e.metaKey;return{ctrlMetaKey:n.keyboardModifierUseMeta?o:t,altKey:r,shiftKey:i}},t.isModifierPressed=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},4056:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.takePointArrayByDistance=t.pointArrayOffset=t.pointArrayLineFromDistance=t.pointArrayLengthCached=t.pointArrayLength=void 0;var o=r(3728),u=r(8254);function l(e){if(e.length<=1)return 0;for(var t=0,r=e[0],n=1;n<e.length;n++)t+=(0,u.pointDistance)(r,e[n]),r=e[n];return t}t.pointArrayLength=l;var a=new Map;t.pointArrayLengthCached=function(e){if(e.length<=1)return 0;var t=a.get(e);return void 0!==t||(t=l(e),a.set(e,t)),t},t.pointArrayLineFromDistance=function(e,t,r,n){var i;void 0===n&&(n=o.PATH_SPACING_PHYSICS);var l=[];if(0===(0,u.pointMagnitude)(t))throw new Error("direction must be valid.");if(r<=0)return[];for(var a=e,c=r;c>=n;){var d=(0,u.pointAdd)(a,(0,u.pointScale)(t,n));l.push(d),c-=n,a=d}return c>0&&l.push((0,u.pointAdd)(null!==(i=l[l.length-1])&&void 0!==i?i:u.PointZero,(0,u.pointScale)(t,c))),l},t.pointArrayOffset=function(e,t){return e.map((function(e){return(0,u.pointAdd)(e,t)}))},t.takePointArrayByDistance=function(e,t){var r=l(e);if(e.length<=1||r<=t)return[e,[]];for(var o=[e[0]],a=[],c=0,d=e[0],s=1;s<e.length;s++){var f=e[s],p=(0,u.pointDistance)(f,d);if(c+p>=t){var v=t-c,h=(0,u.linearInterpolate)(d,f,v/p);o.push(Object.assign({},d,{x:h.x,y:h.y})),a.push.apply(a,i([Object.assign({},f,{x:h.x,y:h.y})],n(e.slice(s)),!1));break}c+=p,o.push(f),d=f}return[o,a]}},8254:(e,t)=>{function r(e){return Math.sqrt(e.x*e.x+e.y*e.y)}Object.defineProperty(t,"__esModule",{value:!0}),t.linearInterpolate=t.pointNormalize=t.pointSubtract=t.pointAdd=t.pointDistance=t.pointMagnitude=t.pointScale=t.pointEquals=t.PointZero=void 0,t.PointZero=Object.freeze({x:0,y:0}),t.pointEquals=function(e,t){return Math.abs(e.x-t.x)<Number.EPSILON&&Math.abs(e.y-t.y)<Number.EPSILON},t.pointScale=function(e,t){return{x:e.x*t,y:e.y*t}},t.pointMagnitude=r,t.pointDistance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},t.pointAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},t.pointSubtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.pointNormalize=function(e){var n=r(e);return 0===n?t.PointZero:{x:e.x/n,y:e.y/n}},t.linearInterpolate=function(e,t,r){return{x:e.x+(t.x-e.x)*r,y:e.y+(t.y-e.y)*r}}},5596:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.keyboardModifierUseMeta=t.isProd=t.OSType=void 0;var i=n(r(1795)),o=i.default.os&&i.default.os.family||"unknown";t.OSType=/windows/i.test(o)?"windows":/Mac|iOS|(OS\ X)/.test(o)?"mac":/linux/i.test(o)?"linux":"unknown",t.isProd=!0,t.keyboardModifierUseMeta="mac"===o},1012:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,u=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(u=(o<3?i(u):o>3?i(t,r,u):i(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u};Object.defineProperty(t,"__esModule",{value:!0}),t.IngredientRegistry=void 0;var i=r(815),o=r(9669),u=function(){function e(){}return e.prototype.getIngredients=function(){return o.ingredients},e.prototype.getIngredient=function(e){var t;return null!==(t=o.ingredients.find((function(t){return t.id===e})))&&void 0!==t?t:null},n([(0,i.injectable)(),(0,i.singleton)()],e)}();t.IngredientRegistry=u},9669:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ingredients=void 0;var n=r(1848),i=r(4981);t.ingredients=[{id:(0,i.ingredientId)("BloodRuby"),name:"Blood Ruby",color:"#C24647",price:90,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,-3,-3,-3,-3),(0,n.cubicBezierCurve)(-3,-3,-3,-3,-3,3,-3,3),(0,n.cubicBezierCurve)(-3,3,-3,3,-5.9999,0,-6,0)],preGrindPercent:.1465},{id:(0,i.ingredientId)("BloodyRoot"),name:"Bloodthorn",color:"#AC4937",price:14,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,.0001001358,-2,0,-2),(0,n.cubicBezierCurve)(0,-2,-.0001001358,-2,-1.7499,1,-1.75,1),(0,n.cubicBezierCurve)(-1.75,1,-1.7501,1,-1.7501,-3,-1.75,-3),(0,n.cubicBezierCurve)(-1.75,-3,-1.7499,-3,-4.0001,2,-4,2),(0,n.cubicBezierCurve)(-4,2,-3.9999,2,-3.9999,-4,-4,-4),(0,n.cubicBezierCurve)(-4,-4,-4.0001,-4,-5.9999,0,-6,0)],preGrindPercent:.435},{id:(0,i.ingredientId)("CliffFungus"),name:"Brown Mushroom",color:"#957C64",price:6,path:[(0,n.cubicBezierCurve)(0,0,0,-1,0,-1,-1,-1),(0,n.cubicBezierCurve)(-1,-1,-2,-1,-2,-1,-2,-2),(0,n.cubicBezierCurve)(-2,-2,-2,-3,-2,-3,0,-3),(0,n.cubicBezierCurve)(0,-3,2,-3,2,-3,2,-4),(0,n.cubicBezierCurve)(2,-4,2,-5,2,-5,.5,-5),(0,n.cubicBezierCurve)(.5,-5,0,-5,0,-5,0,-6)],preGrindPercent:.5},{id:(0,i.ingredientId)("Crystal"),name:"Cloud Crystal",color:"#ADADAD",price:60,path:[(0,n.cubicBezierCurve)(0,0,0,0,-.75,1,0,1.5),(0,n.cubicBezierCurve)(0,1.5,.7499999,2,1,2,1,2.75),(0,n.cubicBezierCurve)(1,2.75,.9999999,3.75,-.9999999,3.25,-1,4.25),(0,n.cubicBezierCurve)(-1,4.25,-1,5,-.75,5,0,5.5),(0,n.cubicBezierCurve)(0,5.5,.7499999,6,1e-4,7,0,7)],preGrindPercent:.177},{id:(0,i.ingredientId)("DryadMushroom"),name:"Dryad's Saddle",color:"#9C785A",price:5.5,path:[(0,n.cubicBezierCurve)(0,0,-.25,0,-1.33541,-.3291796,-1,-1),(0,n.cubicBezierCurve)(-1,-1,-.5,-2,2,-.5,2,-2),(0,n.cubicBezierCurve)(2,-2,2,-3.5,-2,-1.25,-2,-3),(0,n.cubicBezierCurve)(-2,-3,-2,-3.75,1e-4,-3.75,0,-3.75)],preGrindPercent:.53},{id:(0,i.ingredientId)("EarthCrystal"),name:"Earth Pyrite",color:"#93806A",price:30,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,0,-1.5,0,-1.5),(0,n.cubicBezierCurve)(0,-1.5,0,-1.5,-1,-1.5,-1,-1.5),(0,n.cubicBezierCurve)(-1,-1.5,-1,-1.5,-1,-3.5,-1,-3.5),(0,n.cubicBezierCurve)(-1,-3.5,-1,-3.5,1,-3.5,1,-3.5),(0,n.cubicBezierCurve)(1,-3.5,1,-3.5,1,-5.5,1,-5.5),(0,n.cubicBezierCurve)(1,-5.5,1,-5.5,0,-5.5,0,-5.5),(0,n.cubicBezierCurve)(0,-5.5,0,-5.5,1e-4,-7,0,-7)],preGrindPercent:.1364},{id:(0,i.ingredientId)("Firebell"),name:"Firebell",color:"#D1810D",price:5,path:[(0,n.cubicBezierCurve)(0,0,-1.25,1,-1.2501,1,-1.25,1),(0,n.cubicBezierCurve)(-1.25,1,-1.2499,1,-2.5001,0,-2.5,0),(0,n.cubicBezierCurve)(-2.5,0,-2.4999,0,-3.7501,1,-3.75,1),(0,n.cubicBezierCurve)(-3.75,1,-3.7499,1,-3.75,1,-5,0)],preGrindPercent:.5},{id:(0,i.ingredientId)("FireCitrine"),name:"Fire Citrine",color:"#CD7C19",price:50,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,-.75,-1.5,-1.5,0),(0,n.cubicBezierCurve)(-1.5,0,-2.5,2,-2.75,-.7499999,-3.5,-.75),(0,n.cubicBezierCurve)(-3.5,-.75,-4.25,-.75,-4.5,2,-5.5,0),(0,n.cubicBezierCurve)(-5.5,0,-6.25,-1.5,-6.9999,0,-7,0)],preGrindPercent:.202},{id:(0,i.ingredientId)("FrostSapphire"),name:"Frost Sapphire",color:"#7399BF",price:40,path:[(0,n.cubicBezierCurve)(0,0,0,0,.25,.5,.25,.5),(0,n.cubicBezierCurve)(.25,.5,.25,.5,1,-1,1,-1),(0,n.cubicBezierCurve)(1,-1,1,-1,2,1,2,1),(0,n.cubicBezierCurve)(2,1,2,1,3,-1,3,-1),(0,n.cubicBezierCurve)(3,-1,3,-1,4,1,4,1),(0,n.cubicBezierCurve)(4,1,4,1,5,-1,5,-1),(0,n.cubicBezierCurve)(5,-1,5,-1,6,1,6,1),(0,n.cubicBezierCurve)(6,1,6,1,6.75,-.5,6.75,-.5),(0,n.cubicBezierCurve)(6.75,-.5,6.75,-.5,7.0001,0,7,0)],preGrindPercent:.2139},{id:(0,i.ingredientId)("GoblinMushroom"),name:"Goblin Shroom",color:"#928A5E",price:5,path:[(0,n.cubicBezierCurve)(0,0,3,0,3,-5,0,-5)],preGrindPercent:.663},{id:(0,i.ingredientId)("Goldthorn"),name:"Goldthorn",color:"#96714E",price:12.5,path:[(0,n.cubicBezierCurve)(0,0,-.25,0,-.5,.25,-.5,.5),(0,n.cubicBezierCurve)(-.5,.5,-.5,.75,-.25,1,0,1),(0,n.cubicBezierCurve)(0,1,1,1,1,.5,1,0),(0,n.cubicBezierCurve)(1,0,1,-.5,.5,-.9999999,0,-1),(0,n.cubicBezierCurve)(0,-1,-.75,-1,-1.5,-.25,-1.5,.25),(0,n.cubicBezierCurve)(-1.5,.25,-1.5,1.75,-.75,2,0,2),(0,n.cubicBezierCurve)(0,2,1.25,2,2,1.25,2,0),(0,n.cubicBezierCurve)(2,0,2,-1,1,-2,0,-2)],preGrindPercent:.3013},{id:(0,i.ingredientId)("GraveTruffle"),name:"Grave Truffle",color:"#908B7F",price:10,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,-3.0001,-2,-3,-2),(0,n.cubicBezierCurve)(-3,-2,-2.9999,-2,-.7501,-7,-.75,-7),(0,n.cubicBezierCurve)(-.75,-7,-.7499,-7,.7499,-7,.75,-7),(0,n.cubicBezierCurve)(.75,-7,.7501,-7,3,-2,3,-2),(0,n.cubicBezierCurve)(3,-2,3,-2,-1e-4,-1.25,0,-1.25),(0,n.cubicBezierCurve)(0,-1.25,1e-4,-1.25,1e-4,-5,0,-5)],preGrindPercent:.2535},{id:(0,i.ingredientId)("GreenMushroom"),name:"Green Mushroom",color:"#A5A24F",price:9,path:[(0,n.cubicBezierCurve)(0,0,3.02107,1.020414,.5508628,-1.518064,1.527383,-2.506451),(0,n.cubicBezierCurve)(1.527383,-2.506451,2.500548,-3.491441,5.012281,-.9910625,3.996144,-3.978157)],preGrindPercent:.5},{id:(0,i.ingredientId)("GreyChanterelle"),name:"Shadow Chanterelle",color:"#887C77",price:10,path:[(0,n.cubicBezierCurve)(0,0,3,0,-2.384186e-7,5,3,5),(0,n.cubicBezierCurve)(3,5,4,5,4.5,4,4.5,3)],preGrindPercent:.512},{id:(0,i.ingredientId)("IceDragonfruit"),name:"Ice Fruit",color:"#5D8089",price:9,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,.9999,2,1,2),(0,n.cubicBezierCurve)(1,2,1.0001,2,3,-2,3,-2),(0,n.cubicBezierCurve)(3,-2,3,-2,4.9999,2,5,2),(0,n.cubicBezierCurve)(5,2,5.0001,2,6.0001,0,6,0)],preGrindPercent:.333},{id:(0,i.ingredientId)("LavaRoot"),name:"Lava Root",color:"#C86B41",price:11.5,path:[(0,n.cubicBezierCurve)(0,0,0,1.5,-2.5,1.5,-2.5,0),(0,n.cubicBezierCurve)(-2.5,0,-2.5,-1.5,-5,-1.5,-5,0),(0,n.cubicBezierCurve)(-5,0,-5,1.5,-7.5,1.5,-7.5,0),(0,n.cubicBezierCurve)(-7.5,0,-7.5,-.75,-6.25,-.75,-6.25,0)],preGrindPercent:.4289},{id:(0,i.ingredientId)("Leaf"),name:"Terraria",color:"#749064",price:3,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,-.25,-.75,0,-1),(0,n.cubicBezierCurve)(0,-1,.25,-1.25,.5,-1,.75,-1.25),(0,n.cubicBezierCurve)(.75,-1.25,1,-1.5,1,-2.25,.75,-2.5),(0,n.cubicBezierCurve)(.75,-2.5,.5,-2.75,-.5,-2.25,-.75,-2.5),(0,n.cubicBezierCurve)(-.75,-2.5,-1,-2.75,-1,-3.5,-.75,-3.75),(0,n.cubicBezierCurve)(-.75,-3.75,-.5,-4,-.1767767,-3.823223,0,-4),(0,n.cubicBezierCurve)(0,-4,.25,-4.25,1e-4,-5,0,-5)],preGrindPercent:.5},{id:(0,i.ingredientId)("LumpyBeet"),name:"Lumpy Beet",color:"#A36674",price:9,path:[(0,n.cubicBezierCurve)(0,0,0,2,3,1,3,3),(0,n.cubicBezierCurve)(3,3,3,4,1,4,1,3),(0,n.cubicBezierCurve)(1,3,1,2,1,1,1,0),(0,n.cubicBezierCurve)(1,0,1,-1,3,-1,3,0),(0,n.cubicBezierCurve)(3,0,3,1,3,2,4,2)],preGrindPercent:.1805},{id:(0,i.ingredientId)("Marshrooms"),name:"Marshroom",color:"#837956",price:7,path:[(0,n.cubicBezierCurve)(0,0,2,-2,1,-4,3,-4),(0,n.cubicBezierCurve)(3,-4,3.5,-4,5,-4,5,-3)],preGrindPercent:.423},{id:(0,i.ingredientId)("RedMushroom"),name:"Red Mushroom",color:"#A76C3F",price:9.5,path:[(0,n.cubicBezierCurve)(0,0,-4,4,-4,-4,-8,0)],preGrindPercent:.5},{id:(0,i.ingredientId)("Refruit"),name:"Hairy Banana",color:"#C5B13E",price:12.5,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,-3,-3,-4,-3),(0,n.cubicBezierCurve)(-4,-3,-5,-3,-8.000098,-2453497e-11,-8,0),(0,n.cubicBezierCurve)(-8,0,-7,.25,-5,-1.25,-4,-1)],preGrindPercent:.3375},{id:(0,i.ingredientId)("SulphurShelf"),name:"Sulphur Shelf",color:"#D77838",price:11,path:[(0,n.cubicBezierCurve)(0,0,-2,0,-3.5,0,-3.5,.75),(0,n.cubicBezierCurve)(-3.5,.75,-3.5,1.5,-2.75,1.5,-2.25,1.5),(0,n.cubicBezierCurve)(-2.25,1.5,-1.75,1.5,-1,1.5,-1,2.25),(0,n.cubicBezierCurve)(-1,2.25,-1,3,-2.5,3,-4.5,3)],preGrindPercent:.5},{id:(0,i.ingredientId)("Tangleweeds"),name:"Tangleweed",color:"#759786",price:8.5,path:[(0,n.cubicBezierCurve)(0,0,0,-1,3,-1,3,0),(0,n.cubicBezierCurve)(3,0,3,1,1.5,1,1.5,0),(0,n.cubicBezierCurve)(1.5,0,1.5,-1,3,-2,4,0),(0,n.cubicBezierCurve)(4,0,5,2,6.5,1,6.5,0),(0,n.cubicBezierCurve)(6.5,0,6.5,-1,5,-1,5,0),(0,n.cubicBezierCurve)(5,0,5,1,8,1,8,0)],preGrindPercent:.5005},{id:(0,i.ingredientId)("Thistle"),name:"Thunder Thistle",color:"#9E5874",price:9,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,1.9999,3.5,2,3.5),(0,n.cubicBezierCurve)(2,3.5,2.0001,3.5,-.9999,2.5,-1,2.5),(0,n.cubicBezierCurve)(-1,2.5,-1.0001,2.5,1.0001,6,1,6)],preGrindPercent:.353},{id:(0,i.ingredientId)("Thornstick"),name:"Thornstick",color:"#818C4D",price:8,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,-3.9999,-6,-4,-6),(0,n.cubicBezierCurve)(-4,-6,-4.0001,-6,-1.9999,-5,-2,-5)],preGrindPercent:.319},{id:(0,i.ingredientId)("Waterbloom"),name:"Waterbloom",color:"#539278",price:4,path:[(0,n.cubicBezierCurve)(0,0,.25,-.5,1,-.5,1.25,0),(0,n.cubicBezierCurve)(1.25,0,1.5,.4999999,2.25,.5,2.5,0),(0,n.cubicBezierCurve)(2.5,0,2.75,-.5,3.5,-.5,3.75,0),(0,n.cubicBezierCurve)(3.75,0,4,.4999999,4.75,.5,5,0)],preGrindPercent:.5},{id:(0,i.ingredientId)("Wierdshroom"),name:"Weirdshroom",color:"#B88A51",price:8.5,path:[(0,n.cubicBezierCurve)(0,0,-2,0,-2,-6,-1,-6),(0,n.cubicBezierCurve)(-1,-6,.25,-6,1.353553,-6.207107,1,-5.5),(0,n.cubicBezierCurve)(1,-5.5,.5,-4.5,-.25,-3.75,0,-3)],preGrindPercent:.3045},{id:(0,i.ingredientId)("Windbloom"),name:"Windbloom",color:"#ADABA2",price:6,path:[(0,n.cubicBezierCurve)(0,0,1e-4,0,0,0,.5,1.25),(0,n.cubicBezierCurve)(.5,1.25,.9999999,2.5,.9999,2.5,1,2.5),(0,n.cubicBezierCurve)(1,2.5,1.0001,2.5,-1.0001,2.5,-1,2.5),(0,n.cubicBezierCurve)(-1,2.5,-.9999,2.5,-1,2.5,-.5,3.75),(0,n.cubicBezierCurve)(-.5,3.75,-2.086163e-7,5,1e-4,5,0,5)],preGrindPercent:.5},{id:(0,i.ingredientId)("WitchMushroom"),name:"Witch Mushroom",color:"#92777C",price:13,path:[(0,n.cubicBezierCurve)(0,0,0,4,5,1,5,5)],preGrindPercent:.5}]},1555:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(815),i=r(1012);t.default=new n.ContainerModule((function(e){e(i.IngredientRegistry)}))},4981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ingredientId=void 0,t.ingredientId=function(e){return e}},2204:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(815),o=n(r(1555)),u=n(r(4290));t.default=(0,i.composeModules)(o.default,u.default)},5009:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,u=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(u=(o<3?i(u):o>3?i(t,r,u):i(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u},u=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PourSolventPlotBuilderItem=t.StirCauldronPlotBuilderItem=t.AddIngredientPlotBuilderItem=t.PlotBuilderItem=t.PlotBuilder=void 0;var d=r(8593),s=r(815),f=r(2872),p=c(r(9591)),v=r(8247),h=r(3699),y=function(){function e(e){var t=this;this._items$=new f.BehaviorSubject([]),this._itemSubscription=null,this._plot$=new f.BehaviorSubject(null),this._items$.subscribe((function(r){t._itemSubscription&&t._itemSubscription.unsubscribe(),0!==r.length?t._itemSubscription=(0,f.combineLatest)(r.map((function(e){return e.plotItem$}))).subscribe((function(r){t._plot$.next(e.plotItems(r.filter(d.isNotNull)))})):t._plot$.next(null)}))}return Object.defineProperty(e.prototype,"items$",{get:function(){return this._items$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items$.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"plot$",{get:function(){return this._plot$},enumerable:!1,configurable:!0}),e.prototype.loadFromShareString=function(e){var t=this,r=(0,v.decode)(e),n=new DataView(r).getUint8(0),i=r.slice(1);if(0===n){var o=JSON.parse(p.default.inflate(i,{to:"string"})).map((function(e){switch(e.type){case"add-ingredient":return b.fromJSON(e,(function(e){return t._deleteItem(e)}));case"stir-cauldron":return g.fromJSON(e,(function(e){return t._deleteItem(e)}));case"pour-solvent":return _.fromJSON(e,(function(e){return t._deleteItem(e)}));default:throw new Error("Unknown item type: ".concat(e.type))}}));this._items$.next(o)}},e.prototype.getShareString=function(){var e=this._items$.value.map((function(e){return e.toJSON()})),t=p.default.deflate(JSON.stringify(e)),r=new Uint8Array(1+t.length);return r.set(t,1),new DataView(r.buffer).setUint8(0,0),(0,v.encode)(r)},e.prototype.addIngredient=function(){var e=this,t=new b((function(t){return e._deleteItem(t)}));return this._items$.next(a(a([],l(this._items$.value),!1),[t],!1)),t},e.prototype.addStirCauldron=function(){var e=this,t=new g((function(t){return e._deleteItem(t)}));return this._items$.next(a(a([],l(this._items$.value),!1),[t],!1)),t},e.prototype.addPourSolvent=function(){var e=this,t=new _((function(t){return e._deleteItem(t)}));return this._items$.next(a(a([],l(this._items$.value),!1),[t],!1)),t},e.prototype.builderItemFor=function(e){return this._items$.value.find((function(t){return t.plotItem===e}))||null},e.prototype._deleteItem=function(e){this._items$.next(this._items$.value.filter((function(t){return t!==e})))},o([(0,s.injectable)(),u(0,(0,s.inject)(h.Plotter))],e)}();t.PlotBuilder=y;var m=function(){};t.PlotBuilderItem=m;var b=function(e){function t(t){var r=e.call(this)||this;return r._delete=t,r._ingredientId$=new f.BehaviorSubject(null),r._grindPercent$=new f.BehaviorSubject(1),r._plotItem$=new f.BehaviorSubject(null),r._isValid$=(0,f.combineLatest)([r._ingredientId$,r._grindPercent$]).pipe((0,f.map)((function(){return r.isValid}))),(0,f.combineLatest)([r._ingredientId$,r._grindPercent$]).subscribe((function(e){var t=l(e,2),n=t[0],i=t[1];r.isValid?r._plotItem$.next({type:"add-ingredient",ingredientId:n,grindPercent:i}):r._plotItem$.next(null)})),r}return i(t,e),t.fromJSON=function(e,r){var n=new t(r);return n.setIngredient(e.ingredientId),n.setGrindPercent(e.grindPercent),n},t.prototype.toJSON=function(){return{type:"add-ingredient",ingredientId:this._ingredientId$.value,grindPercent:this._grindPercent$.value}},Object.defineProperty(t.prototype,"isValid$",{get:function(){return this._isValid$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){var e=this._grindPercent$.value;return null!=this._ingredientId$.value&&e>=0&&e<=1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ingredientId$",{get:function(){return this._ingredientId$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ingredientId",{get:function(){return this._ingredientId$.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grindPercent$",{get:function(){return this._grindPercent$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotItem$",{get:function(){return this._plotItem$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotItem",{get:function(){return this._plotItem$.value},enumerable:!1,configurable:!0}),t.prototype.setIngredient=function(e){e!==this._ingredientId$.value&&this._ingredientId$.next(e)},t.prototype.setGrindPercent=function(e){e!==this._grindPercent$.value&&this._grindPercent$.next(e)},t.prototype.delete=function(){this._delete(this)},t}(m);t.AddIngredientPlotBuilderItem=b;var g=function(e){function t(t){var r=e.call(this)||this;return r._delete=t,r._distance$=new f.BehaviorSubject(null),r._plotItem$=new f.BehaviorSubject(null),r._isValid$=(0,f.combineLatest)([r._distance$]).pipe((0,f.map)((function(){return r.isValid}))),(0,f.combineLatest)([r._distance$]).subscribe((function(e){var t=l(e,1)[0];r.isValid?r._plotItem$.next({type:"stir-cauldron",distance:t}):r._plotItem$.next(null)})),r}return i(t,e),t.fromJSON=function(e,r){var n=new t(r);return n.setDistance(e.distance),n},t.prototype.toJSON=function(){return{type:"stir-cauldron",distance:this._distance$.value}},Object.defineProperty(t.prototype,"isValid$",{get:function(){return this._isValid$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){var e=this._distance$.value;return null!=e&&e>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotItem$",{get:function(){return this._plotItem$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotItem",{get:function(){return this._plotItem$.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"distance$",{get:function(){return this._distance$},enumerable:!1,configurable:!0}),t.prototype.setDistance=function(e){this._distance$.next(e)},t.prototype.delete=function(){this._delete(this)},t}(m);t.StirCauldronPlotBuilderItem=g;var _=function(e){function t(t){var r=e.call(this)||this;return r._delete=t,r._distance$=new f.BehaviorSubject(null),r._plotItem$=new f.BehaviorSubject(null),r._isValid$=(0,f.combineLatest)([r._distance$]).pipe((0,f.map)((function(){return r.isValid}))),(0,f.combineLatest)([r._distance$]).subscribe((function(e){var t=l(e,1)[0];r.isValid?r._plotItem$.next({type:"pour-solvent",distance:t}):r._plotItem$.next(null)})),r}return i(t,e),t.fromJSON=function(e,r){var n=new t(r);return n.setDistance(e.distance),n},t.prototype.toJSON=function(){return{type:"pour-solvent",distance:this._distance$.value}},Object.defineProperty(t.prototype,"isValid$",{get:function(){return this._isValid$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){var e=this._distance$.value;return null!=e&&e>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotItem$",{get:function(){return this._plotItem$},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotItem",{get:function(){return this._plotItem$.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"distance$",{get:function(){return this._distance$},enumerable:!1,configurable:!0}),t.prototype.setDistance=function(e){this._distance$.next(e)},t.prototype.delete=function(){this._delete(this)},t}(m);t.PourSolventPlotBuilderItem=_},3699:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,u=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(u=(o<3?i(u):o>3?i(t,r,u):i(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u},i=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Plotter=void 0;var a=r(6486),c=r(815),d=r(1848),s=r(4056),f=r(8254),p=r(1012),v=function(){function e(e){this.ingredientRegistry=e}return e.prototype.plotItems=function(e){var t,r,n={committedPoints:[],pendingPoints:[]};Date.now();try{for(var i=o(e),u=i.next();!u.done;u=i.next()){var l=u.value;n=this._plotItem(l,n)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},e.prototype._plotItem=function(e,t){switch(e.type){case"add-ingredient":return this._plotAddIngredient(e,t);case"pour-solvent":return this._plotPourSolvent(e,t);case"stir-cauldron":return this._plotStirCauldron(e,t);default:throw new Error("Unknown plot item type: ".concat(e.type))}},e.prototype._plotAddIngredient=function(e,t){var r,n,i,c,p=e.ingredientId,v=e.grindPercent,h=null!==(c=null!==(i=(0,a.last)(t.pendingPoints))&&void 0!==i?i:(0,a.last)(t.committedPoints))&&void 0!==c?c:f.PointZero,y=this.ingredientRegistry.getIngredient(p);if(!y)throw new Error("Unknown ingredient: ".concat(p));var m=[],b=0;try{for(var g=o(y.path),_=g.next();!_.done;_=g.next()){var P=_.value,O=(0,d.curveToPoints)(P);m.push.apply(m,l([],u(O),!1)),b+=(0,s.pointArrayLengthCached)(O)}}catch(e){r={error:e}}finally{try{_&&!_.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}var C=y.preGrindPercent+v*(1-y.preGrindPercent);return function(e,t,r){if(null==t)throw new Error("source is null");return 0===e.length?r:Object.assign({},r,{pendingPoints:r.pendingPoints.concat(e.map((function(e){return{x:e.x,y:e.y,source:t}})))})}(u((0,s.takePointArrayByDistance)(m,C*b),1)[0].map((function(e){return(0,f.pointAdd)(h,e)})),e,t)},e.prototype._plotPourSolvent=function(e,t){var r,n=null!==(r=t.committedPoints[t.committedPoints.length-1])&&void 0!==r?r:f.PointZero;if((0,f.pointEquals)(n,f.PointZero))return t;var i=e.distance,o=(0,f.pointDistance)(n,f.PointZero);return i>o&&(i=o),function(e,t,r){var n;if(null==t)throw new Error("source is null");if(0===e.length)return r;var i=(0,f.pointSubtract)((0,a.last)(e),null!==(n=(0,a.last)(r.committedPoints))&&void 0!==n?n:f.PointZero);return Object.assign({},r,{committedPoints:r.committedPoints.concat(e.map((function(e){return{x:e.x,y:e.y,source:t}}))),pendingPoints:r.pendingPoints.map((function(e){return{x:e.x+i.x,y:e.y+i.y,source:e.source}}))})}((0,s.pointArrayLineFromDistance)(n,(0,f.pointNormalize)((0,f.pointSubtract)(f.PointZero,n)),i),e,t)},e.prototype._plotStirCauldron=function(e,t){var r=e.distance,n=u((0,s.takePointArrayByDistance)(t.pendingPoints,r),2),i=n[0],o=n[1];return{committedPoints:t.committedPoints.concat(i),pendingPoints:o}},n([(0,c.injectable)(),(0,c.singleton)(),i(0,(0,c.inject)(p.IngredientRegistry))],e)}();t.Plotter=v},4290:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(815),i=r(5009),o=r(3699);t.default=new n.ContainerModule((function(e){e(i.PlotBuilder),e(o.Plotter)}))},7518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyPlotResult=void 0,t.EmptyPlotResult=Object.freeze({committedPoints:[],pendingPoints:[]})},422:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(917),o=r(4110),u=n(r(7294)),l=(0,o.createTheme)({palette:{mode:"light"}});t.default=function(e){var t=e.children;return u.default.createElement(i.ThemeProvider,{theme:l},t)}},8593:function(e,t){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.isNotNull=t.keepEveryK=t.windowArray=void 0,t.windowArray=function(e,t){for(var i=n([],r(e),!1),o=[],u=[];i.length>0;)u.push(i.pop()),u.length===t&&(o.push(u),u=[]);return u.length>0&&o.push(u),o},t.keepEveryK=function(e,t,r){if(void 0===r&&(r=!1),0===e.length)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return r&&(e.length-1)%t!=0&&n.push(e[e.length-1]),n},t.isNotNull=function(e){return null!=e}}},e=>{e.O(0,[984],(()=>(2629,e(e.s=2629)))),e.O()}]);
//# sourceMappingURL=client.3319bc7e9ae4e839acc7.bundle.js.map